(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{501:function(n,t,s){"use strict";s.r(t);var a=s(2),p=Object(a.a)({},(function(){var n=this,t=n._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("p",[n._v("阅读本文建议搭配"),t("RouterLink",{attrs:{to:"/java/SpringBoot原理分析.html"}},[n._v("SpringBoot原理分析")]),n._v("食用")],1),n._v(" "),t("p",[n._v("SpringBoot的启动流程包含两个大的部分")]),n._v(" "),t("p",[n._v("一个是初始化,构造SpringApplication")]),n._v(" "),t("p",[n._v("一个是run()方法执行")]),n._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("SpringApplication")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Application")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),n._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br")])]),t("h2",{attrs:{id:"一-初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-初始化"}},[n._v("#")]),n._v(" 一.初始化")]),n._v(" "),t("p",[n._v("点击进入SpringApplication的run()方法")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://18334034784.oss-cn-chengdu.aliyuncs.com/lin-oss/SpringBoot-run.png",alt:"image-20231118193047122"}})]),n._v(" "),t("p",[n._v("发现run()需要先构造一个"),t("strong",[n._v("SpringApplication")]),n._v("对象,再执行run方法")]),n._v(" "),t("p",[n._v("这是一个事件源对象")]),n._v(" "),t("p",[n._v("所有的事件都是在这个对象上面产生的")]),n._v(" "),t("p",[n._v("我们接着进入SpringApplication中")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://18334034784.oss-cn-chengdu.aliyuncs.com/lin-oss/SpringApplication%E5%AF%B9%E8%B1%A1.png",alt:"image-20231118193440196"}})]),n._v(" "),t("p",[n._v("下面我们分析几个重要的")]),n._v(" "),t("ul",[t("li",[n._v("112 : primarySources是需要运行的入口类,首先判断它不为空")]),n._v(" "),t("li",[n._v("114 : 判断当前是否是web环境,判断是否有Servlet的class")]),n._v(" "),t("li",[n._v("115 和116 : 从 SpringFactories加载监听器和初始化所需的东西到这SpringApplication")])]),n._v(" "),t("p",[n._v("以上这些步骤仅仅获取到了名称,并没有真正执行")]),n._v(" "),t("h2",{attrs:{id:"二-run"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-run"}},[n._v("#")]),n._v(" 二.run()")]),n._v(" "),t("p",[n._v("刚才是进入了SpringApplication中,我们现在点击run()方法中")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://18334034784.oss-cn-chengdu.aliyuncs.com/lin-oss/run%E6%96%B9%E6%B3%95.png",alt:"image-20231118200603820"}})]),n._v(" "),t("p",[n._v("我们依然来分析几个重要的")]),n._v(" "),t("ul",[t("li",[t("p",[n._v("139 和 140 : StopWatch时钟管理,监控启动耗时,158行计时结束")])]),n._v(" "),t("li",[t("p",[n._v("141 : 设置Ioc容器变量 context")])]),n._v(" "),t("li",[t("p",[n._v("142 : 定义异常管理集合")])]),n._v(" "),t("li",[t("p",[n._v("144 : 定义一个容器"),t("strong",[n._v("SpringApplicationRunListeners")]),n._v(",用来装各种监听器")])]),n._v(" "),t("li",[t("p",[n._v("145 : 调用所有listener的方法")])]),n._v(" "),t("li",[t("p",[n._v("149 ~ 151 : 封装参数,准备环境"),t("strong",[n._v("ConfigurableEnvironment")])])]),n._v(" "),t("li",[t("p",[n._v("152 : Banner用来打印logo到控制台,就是那一个很大得Spring,可以替换")])]),n._v(" "),t("li",[t("p",[n._v("153 : 创建Ioc容器")])]),n._v(" "),t("li",[t("p",[n._v("155 : 准备环境,加载上下文对象"),t("strong",[n._v("ConfigurableApplicationContext")])])]),n._v(" "),t("li",[t("p",[n._v("156 : **refreshContext()**加载所有的Bean")])])]),n._v(" "),t("p",[n._v("之后计时结束,SpringBoot就启动啦!")])])}),[],!1,null,null,null);t.default=p.exports}}]);